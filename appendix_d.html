
<section data-type="appendix" id="appendix_quick_project">
<h1>A ClojureScript QuickStart Project</h1>

<p>
I created a project named <em>sample-project</em> by following the instructions at the <a href="https://github.com/clojure/clojurescript/wiki/Quick-Start">ClojureScript Quick Start page.</a> (I am sick and tired of “Hello, world!” so I did something slightly different.)
</p>

<section data-type="sect1">
<h1>File Contents</h1>
<p>Here is the file structure of the directory, with files organized by category rather than alphabetical order. Notice that the project name <em>sample-project</em> has a hyphen in it, but when used in a directory name, you replace the hyphen with an underscore: <em>sample_project</em>.
</p>

<pre>sample_project
├── cljs.jar
├── src
│   └── sample_project
│       └── core.cljs</pre>
├── index.html
├── build.clj
├── release.clj
├── repl.clj
└── watch.clj

<p>
The <em>cljs.jar</em> file contains ClojureScript, downloaded from the link at the Quick Start page.
</p>

<section data-type="sect2">
<h2>ClojureScript File <em>src/sample_project/core.cljs</em></h2>
<pre>;; remove the :require and defonce when building the release version

(ns sample-project.core
  (:require [clojure.browser.repl :as repl]))

(defonce conn
  (repl/connect "http://localhost:9000/repl")) 

(enable-console-print!)

(println "It works!")</pre>
</section>

<section data-type="sect2">
<h2>File <em>index.html</em></h2>
<p>
  This file has a bit more than the Quick Start file: the addition of the <code>&lt;meta&gt;</code> element avoids a warning in the web console, and the <code>&lt;title&gt;</code> element lets you distinguish projects from one another if you have multiple browser tabs open.
</p>

<pre>&lt;!DOCTYPE html&gt;
&lt;html&gt;
    &lt;head&gt;
        &lt;title&gt;sample-project&lt;/title&gt;
        &lt;meta http-equiv="Content-Type" content="text/html; charset=utf-8" /&gt;
    &lt;/head&gt;
    &lt;body&gt;
        &lt;script type="text/javascript" src="out/main.js"&gt;&lt;/script&gt;
    &lt;/body&gt;
&lt;/html&gt;</pre>
</section>

<section data-type="sect2">
<h2>File <em>build.clj</em></h2>
<p>
  Builds an un-optimized version of the project. Run with the command
</p>

<pre>(require 'cljs.build.api)

(cljs.build.api/build "src"
  {:main 'sample-project.core
   :output-to "out/main.js"})</pre>
</section>


<section data-type="sect2">
<h2>File <em>release.clj</em></h2>
<p>
  Builds an optimized version of the project.
</p>

<pre>((require 'cljs.build.api)

(cljs.build.api/build "src"
  {:output-to "out/main.js"
   :optimizations :advanced})

(System/exit 0)</pre>
</section>

<section data-type="sect2">
<h2>File <em>repl.clj</em></h2>
<p>
Builds an unoptimized version of the project and launches a browser REPL.
On Linux and MacOSX, make sure you have <code>rlwrap</code> installed.
</p>

<pre>(require 'cljs.repl)
(require 'cljs.build.api)
(require 'cljs.repl.browser)

(cljs.build.api/build "src"
  {:main 'sample-project.core
   :output-to "out/main.js"
   :verbose true})

(cljs.repl/repl (cljs.repl.browser/repl-env)
  :watch "src"
  :output-dir "out")</pre>
</section>

<section data-type="sect2">
<h2>File <em>repl.clj</em></h2>
<p>
This program watches the <em>src</em> directory and recompiles when any file in that directory changes.
</p>
<pre>(require 'cljs.build.api)

(cljs.build.api/watch "src"
  {:main 'sample-project.core
   :output-to "out/main.js"})</pre>
</section>

</section>
